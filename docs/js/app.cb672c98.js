(function(e){function t(t){for(var n,i,l=t[0],c=t[1],u=t[2],d=0,v=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&v.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);s&&s(t);while(v.length)v.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},2610:function(e,t,a){},"2f3e":function(e,t,a){"use strict";a("da5c")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Description",{attrs:{msg:"omitting image"}}),a("DrawingCanvas")],1)},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h2",[e._v(e._s(e.msg))]),a("p",[e._v("グレー背景の個所に、画像をペーストしてください。")]),a("p",[e._v("［DRAW］ボタンで画像を表示します。")]),a("p",[e._v("［DPROCESS］ボタンで加工します。")]),a("p",[e._v("右クリック「名前を付けて画像を保存」でダウンロードできます。")])])},l=[],c={name:"Description",props:{msg:String}},u=c,s=(a("9885"),a("2877")),d=Object(s["a"])(u,i,l,!1,null,"6ab3ef25",null),v=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"container"},on:{paste:e.pasteImage,dragover:e.dragover,drop:function(t){return t.stopPropagation(),e.dropImage(t)}}},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.src,expression:"src"}]},[a("v-card-text",[e._v(" 画像src: "+e._s(e.src)+" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6",lg:"6"}},[a("v-text-field",{attrs:{label:"start"},model:{value:e.range.start,callback:function(t){e.$set(e.range,"start",t)},expression:"range.start"}},[e._v(" start ")])],1),a("v-col",{attrs:{cols:"12",md:"6",lg:"6"}},[a("v-text-field",{attrs:{label:"end"},model:{value:e.range.end,callback:function(t){e.$set(e.range,"end",t)},expression:"range.end"}},[e._v("end")])],1)],1)],1),a("v-btn",{on:{click:function(t){return e.drawInitialCanvas()}}},[e._v("draw")]),a("v-btn",{on:{click:function(t){return e.process()}}},[e._v("process")]),a("v-btn",{on:{click:function(t){return e.downloadImage()}}},[e._v("download")])],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e._v(" original image "),a("canvas",{ref:"originalCanvas",attrs:{width:"500",height:"1000"},on:{mousedown:e.mousedown,mouseup:e.mouseup}})]),a("v-col",{attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e._v(" processed image "),a("canvas",{ref:"processedCanvas",attrs:{width:"500",height:"1000"}}),a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"downloadLink",attrs:{id:"downloadLink",download:"canvas.png"}},[e._v("download link")])])],1)],1)},g=[],p=(a("cb29"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("a6f4")),w=Object(p["b"])({name:"DrawingCanvas",setup:function(){var e=Object(p["e"])({start:50,end:100}),t=Object(p["e"])(0),a=Object(p["e"])(""),n=Object(p["e"])(),r=Object(p["e"])(),o=Object(p["e"])(),i=Object(p["e"])(),l=Object(p["e"])(),c=Object(p["e"])(),u=function(){s(n.value),s(r.value),console.log("draw original image");var e=new Image;e.src=a.value;var t=e.width,l=e.height;n.value.height=500*l/t,c.value=500/t,o.value.drawImage(e,0,0,t,l,0,0,500,500*l/t),console.log("draw processed image");var u=new Image;u.src=a.value;var d=u.width,v=u.height;r.value.height=500*v/d,i.value.drawImage(u,0,0,d,v,0,0,500,500*v/d)},s=function(e){var t=e.getContext("2d");e.width=500,e.height=1e3,t.clearRect(0,0,e.width,e.height)},d=function(e,t,a,n){e.drawImage(t,0,0,t.width,a,0,0,n,a*n/t.width)},v=function(e,t,a,n,r){e.drawImage(t,0,n,t.width,t.height-n,0,a*r/t.width,r,(t.height-n)*r/t.width)},f=function(e,t,a,n){e.beginPath(),e.moveTo(0,a*n/t.width-5);for(var r=0;r<10;r++){var o=r%2==0?10:-10;e.quadraticCurveTo(25+r*(n/10),a*n/t.width+o-5,(r+1)*(n/10),a*n/t.width-5)}e.lineTo(n,a*n/t.width+5);for(var i=10;i>0;i--){var l=i%2==0?-10:10;e.quadraticCurveTo(25+n/10*(i-1),a*n/t.width+l+5,n/10*(i-1),a*n/t.width+5)}e.lineTo(0,a*n/t.width),e.fillStyle="rgb(255,255,255)",e.fill(),e.strokeStyle="gray",e.stroke()},g=function(){s(r.value);var t=new Image;if(t.src=a.value,e.value.start>e.value.end){var n=e.value.start,o=e.value.end;e.value.start=o,e.value.end=n}var l=t.width,c=t.height;r.value.height=500*c/l,setTimeout((function(){d(i.value,t,e.value.start,500),v(i.value,t,e.value.start,e.value.end,500),f(i.value,t,e.value.start,500)}),100)},w=function(e){console.log("called paste image()"),e.preventDefault(),e.stopPropagation();var t=e.clipboardData.items[0].getAsFile();console.log(t);var n=window.URL.createObjectURL(t);a.value=n,console.log(n),u()},h=function(e){e.preventDefault();var t=e.dataTransfer.files;if(1===t.length&&0===t[0].type.indexOf("image")){var n=t[0],r=window.URL.createObjectURL(n);a.value=r,u()}else console.log("画像ファイルではありません。")},m=function(e){e.preventDefault()},b=function(){var e=l.value;e.href=r.value.toDataURL(),e.click()},O=function(t){console.log("mousedown");var a=n.value.getBoundingClientRect();console.log(t.clientY-a.top),e.value.start=(t.clientY-a.top)/c.value,e.value.end=(t.clientY-a.top)/c.value},_=function(t){console.log("mouseup");var a=n.value.getBoundingClientRect();console.log(t.clientY-a.top),e.value.end=(t.clientY-a.top)/c.value,g()};return Object(p["c"])((function(){o.value=n.value.getContext("2d"),i.value=r.value.getContext("2d")})),Object(p["d"])((function(){})),Object(p["f"])(a,(function(){setTimeout((function(){u()}),100)})),{range:e,value:t,src:a,imageRatio:c,originalCanvas:n,processedCanvas:r,originalContext:o,processedContext:i,downloadLink:l,drawInitialCanvas:u,mousedown:O,mouseup:_,process:g,pasteImage:w,drawUpperImage:d,drawLowerImage:v,drawMiddleImage:f,dropImage:h,dragover:m,downloadImage:b}}}),h=w,m=(a("2f3e"),a("6544")),b=a.n(m),O=a("8336"),_=a("b0af"),j=a("99d9"),x=a("62ad"),C=a("a523"),y=a("0fd9"),I=a("8654"),k=Object(s["a"])(h,f,g,!1,null,"79541b73",null),D=k.exports;b()(k,{VBtn:O["a"],VCard:_["a"],VCardText:j["a"],VCol:x["a"],VContainer:C["a"],VRow:y["a"],VTextField:I["a"]});var T={name:"App",components:{Description:v,DrawingCanvas:D},data:function(){return{}}},R=T,P=(a("034f"),Object(s["a"])(R,r,o,!1,null,null,null)),S=P.exports,L=a("f309");n["default"].use(L["a"]);var V=new L["a"]({});n["default"].use(p["a"]),n["default"].config.productionTip=!1,new n["default"]({vuetify:V,render:function(e){return e(S)}}).$mount("#app")},"85ec":function(e,t,a){},9885:function(e,t,a){"use strict";a("2610")},da5c:function(e,t,a){}});
//# sourceMappingURL=app.cb672c98.js.map